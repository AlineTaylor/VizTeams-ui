<mat-card class="team-list-card">
  <div class="card-header">
    <span>Teams</span>
  </div>

  <div class="teams-scroll">
    <mat-accordion multi>
      @for (team of teams; track team._id) {
      <mat-expansion-panel
        [expanded]="panelOpenState[team._id!]"
        (opened)="panelOpenState[team._id!] = true; onSelect(team)"
        (closed)="onClose(team)"
      >
        <mat-expansion-panel-header>
          <mat-panel-title>{{ team.teamName }}</mat-panel-title>
          <mat-panel-description>
            {{ team.members.length }} member{{
              team.members.length === 1 ? '' : 's'
            }}
          </mat-panel-description>
        </mat-expansion-panel-header>

        <!-- Team Description -->
        @if (team.description) {
          <div class="team-description">
            <strong>Description:</strong> {{ team.description }}
          </div>
        }

        <!-- Team Members -->
        <div class="team-members-strip">
          @if (team.members.length > 0) {
            <ul class="member-list">
              @for (m of team.members; track m._id) {
                <li>
                  <strong>{{ m.name }}</strong> — <em>{{ m.title }}</em>
                </li>
              }
            </ul>
          } @else {
            <div class="empty">No members listed.</div>
          }
        </div>
      </mat-expansion-panel>
      } @empty {
      <div class="empty">No teams found.</div>
      }
    </mat-accordion>
  </div>

  <div class="bottom-divider"></div>

  @if (selectedTeam) {
    <button
      mat-icon-button
      color="warn"
      class="add-team-square"
      style="right: 70px"
      (click)="deleteSelectedTeam()"
      matTooltip="Delete Selected Team"
      matTooltipPosition="above"
    >
      <span style="font-size: 20px; font-weight: bold">×</span>
    </button>
  }

  <button
    mat-icon-button
    class="add-team-square"
    (click)="openAddTeamDialog()"
    matTooltip="Add Team"
    matTooltipPosition="above"
  >
    +
  </button>
</mat-card>
