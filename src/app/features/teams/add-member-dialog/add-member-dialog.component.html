<h2 mat-dialog-title>
  {{ isEditMode() ? 'Edit Member' : 'Add Member' }}
</h2>

<form [formGroup]="form" (ngSubmit)="submit()" novalidate>
  <mat-dialog-content class="dialog-body">
    <!-- First Name -->
    <mat-form-field appearance="outline" class="full-width">
      <mat-label>First Name</mat-label>
      <input matInput formControlName="firstName" placeholder="Jane" required />
      @if(form.controls.firstName.hasError('required')) {
        <mat-error>First name is required</mat-error>
      } @else if(form.controls.firstName.hasError('minlength')) {
        <mat-error>Must be at least 2 characters</mat-error>
      }
    </mat-form-field>

    <!-- Last Name -->
    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Last Name</mat-label>
      <input matInput formControlName="lastName" placeholder="Doe" required />
      @if(form.controls.lastName.hasError('required')) {
        <mat-error>Last name is required</mat-error>
      } @else if(form.controls.lastName.hasError('minlength')) {
        <mat-error>Must be at least 2 characters</mat-error>
      }
    </mat-form-field>

    <!-- Title -->
    <mat-form-field appearance="outline" class="full-width">
      <mat-label>Title</mat-label>
      <mat-select formControlName="title" required>
        @for(title of titleOptions; track title) {
          <mat-option [value]="title">{{ title }}</mat-option>
        }
      </mat-select>
      @if(form.controls.title.hasError('required')) {
        <mat-error>Title is required</mat-error>
      }
    </mat-form-field>

    <!-- Avatar Selection -->
    <div class="picsum-preview">
      <strong>Select an avatar:</strong>
      <div class="photo-grid">
        @for(photo of photos(); track photo.id) {
          <img
            [src]="photo.download_url"
            [class.selected]="photo.download_url === selectedAvatar()"
            (click)="selectAvatar(photo.download_url)"
            alt="Avatar"
          />
        }
      </div>
      <mat-paginator
        [length]="totalPhotos()"
        [pageSize]="pageSize"
        [pageSizeOptions]="[8, 12, 24]"
        (page)="onPageChange($event)"
      ></mat-paginator>
    </div>
  </mat-dialog-content>

  <!-- Footer -->
  <mat-dialog-actions class="dialog-footer">
    <button mat-stroked-button color="warn" type="button" (click)="cancel()">
      Cancel
    </button>
    <button
      mat-raised-button
      color="primary"
      type="submit"
      [disabled]="form.invalid"
    >
      {{ isEditMode() ? 'Save Changes' : 'Add Member' }}
    </button>
  </mat-dialog-actions>
</form>
